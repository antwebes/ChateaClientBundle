{% extends "ChateaClientBundle::mainLayout.html.twig" %}

{% trans_default_domain 'UserRegistration' %}

{% block chatea_title %}{{ 'user.register' | trans }}{% endblock %}
{% block chatea_meta_description %}{% endblock %}
{% block chatea_meta_keywords %}{% endblock %}

{% block chatea_body %}
    {% include "ChateaClientBundle:User:_register_body.html.twig" %}
{% endblock %}

{% block chatea_css %}
    {{ parent() }}
    {% stylesheets
    "@ChateaClientBundle/Resources/public/css/jquery-ui-1.10.3.custom.min.css"
    %}
    <link href="{{ asset(asset_url) }}" type="text/css" rel="stylesheet" />
    {% endstylesheets %}
{% endblock chatea_css %}

{% block chatea_js %}
    <script>
        window.api_endpoint = "{{ api_endpoint }}";
    </script>
    {% javascripts
        '@ChateaClientBundle/Resources/public/js/jquery-ui-1.10.3.custom.min.js'
        '@ChateaClientBundle/Resources/public/js/cities.js'
        '@ChateaClientBundle/Resources/public/js/userNickSuggestions.js'
    %}
    <script src="{{ asset(asset_url) }}"></script>
    {% endjavascripts %}
    <script>
        var executed = false;
        var messages = {
            mail_is_aviable: '{{ 'form.mail_is_aviable' | trans }}',
            username_is_aviable: '{{ 'form.username_is_aviable' | trans }}',
            nick_suggestions: '{{ 'form.nick_suggestions' | trans }}',
            server_errors: {
                'This value is already used.': '{{ 'form.username_already_used' | trans }}',
                'Email already in use. An email only be used in chatsfree account at a time.': '{{ 'form.email_already_used' | trans }}',
                'This value is not a valid email address.': '{{ 'form.email_not_valid' | trans }}',
                'The username is not valid. The username can not include spaces, it can not start with number, or it can not include the special characters': '{{ 'form.username_not_valid' | trans }}'
            }
        };

        var onlyOnce = function(){
            if(!executed){
                executed = true;
                fillSelectCountry( '{{ app.request.get('country')|raw }}' );
            }
        };

        $(document).ready(function(){
            onlyOnce();
            userNickSuggestions(messages);
        });
    </script>
{% endblock %}